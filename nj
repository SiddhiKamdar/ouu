public List<ExpensesDetail> getTeamExpenses(){

    Employee manager = getLoggedInEmployee();

    List<Employee> teamMembers =
            employeeRepository.findBySupervisor(manager);

    List<Integer> teamIds =
            teamMembers.stream()
                    .map(Employee::getEmployeeId)
                    .toList();

    return expenseRepo.findAll()
            .stream()
            .filter(exp ->
                    teamIds.contains(
                            exp.getEmployee()
                                    .getEmployeeId()))
            .toList();
}

@GetMapping("/team")
@PreAuthorize("hasRole('MANAGER')")
public ResponseEntity<List<ExpensesDetail>>
teamExpenses(){

    return ResponseEntity.ok(
            expenseService.getTeamExpenses());
}

