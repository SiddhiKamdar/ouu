@Entity
@Table(name = "travel_employees")
public class TravelEmployee {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;

    @ManyToOne
    @JoinColumn(name = "travel_id", nullable = false)
    private Travel travel;

    @ManyToOne
    @JoinColumn(name = "employee_id", nullable = false)
    private Employee employee;

    // getters setters
}

@Repository
public interface TravelEmployeeRepository 
        extends JpaRepository<TravelEmployee, Integer> {
}

public TravelResponseDTO createTravel(TravelRequestDTO request) {

    Employee scheduler = employeeRepository.findById(request.getSchedulerId())
            .orElseThrow(() -> new RuntimeException("Scheduler not found"));

    Travel travel = new Travel();
    travel.setDestination(request.getDestination());
    travel.setDepartDate(request.getDepartDate());
    travel.setReturnDate(request.getReturnDate());
    travel.setScheduler(scheduler);

    Travel savedTravel = travelRepository.save(travel);

    for (Long empId : request.getEmployeeIds()) {

        Employee employee = employeeRepository.findById(empId)
                .orElseThrow(() -> new RuntimeException("Employee not found"));

        TravelEmployee travelEmployee = new TravelEmployee();
        travelEmployee.setTravel(savedTravel);
        travelEmployee.setEmployee(employee);

        travelEmployeeRepository.save(travelEmployee);
    }

    return mapToDTO(savedTravel);
}
